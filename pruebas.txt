$rg = 'finops-assets'
$ws = 'LOG-WS01-TEST'
$fecha = get-date

$query = get-content .\query1.kql

$allsaveds= Get-AzOperationalInsightsSavedSearch -ResourceGroupName $rg -WorkspaceName $ws

$alias="ismaeltest2"

 if($alias -in $allsaveds)
  {
   New-AzOperationalInsightsSavedSearch -ResourceGroupName $rg -WorkspaceName $ws -SavedSearchId "ismaeltest2" -DisplayName "ismaeltest2" -Category "FunctionWorkspace" -Query $query -Version $fecha -Force -FunctionAlias $alias
  }else
  {
   Set-AzOperationalInsightsSavedSearch -ResourceGroupName $rg -WorkspaceName $ws -SavedSearchId "ismaeltest2" -DisplayName "ismaeltest2" -Category "FunctionWorkspace" -Query $query -Version $fecha -FunctionAlias $alias
  }
  
  
  https://teams.microsoft.com/l/meetup-join/19%3ameeting_YjAxZWQxZjUtNWZlZC00ZDg3LWIzYmMtNzJiYjAxMjg3YzU2%40thread.v2/0?context=%7b%22Tid%22%3a%2235595a02-4d6d-44ac-99e1-f9ab4cd872db%22%2c%22Oid%22%3a%22c8313822-f60d-46b6-a060-96ceda77a1a6%22%7d
